{
    "caption": "Message Context",
    "description": "Communication context for AI system interactions including protocols, roles, clients, and session information for MCP and other AI communication systems.",
    "extends": "_entity",
    "name": "message_context",
    "attributes": {
        "name": {
            "description": "The name or identifier of the message context. In AI systems, this could be the conversation ID, session name, thread identifier, or interaction name (e.g., 'user-session-123', 'conversation-abc', 'chat-thread-456')."
        },
        "ai_role_id": {
            "description": "The originator or target role of the message.",
            "requirement": "recommended",
            "enum": {
                "0": {
                    "caption": "Unknown",
                    "description": "Unknown role type."
                },
                "1": {
                    "caption": "User",
                    "description": "The human user initiating a request."
                },
                "2": {
                    "caption": "Assistant",
                    "description": "The AI model generating a response."
                },
                "3": {
                    "caption": "Tool",
                    "description": "A callable tool or API invoked by the assistant."
                },
                "4": {
                    "caption": "Agent",
                    "description": "A software agent acting with autonomy or intention."
                },
                "5": {
                    "caption": "Orchestrator",
                    "description": "The component coordinating multiple agents or tools."
                },
                "6": {
                    "caption": "Retriever",
                    "description": "A vector DB or knowledge system providing context."
                },
                "99": {
                    "caption": "Other",
                    "description": "Other role type not covered above."
                }
            }
        },
        "ai_role": {
            "description": "The normalized caption of the role_id.",
            "requirement": "optional"
        },
        "application": {
            "description": "The initiating client application. In AI systems, this represents the client-side application or framework that initiates requests (e.g., LangChain application, web browser, mobile app, SDK implementation).",
            "requirement": "recommended"
        },
        "service": {
            "description": "The server or service handling the request. In AI systems, this represents the AI service, API endpoint, or agent that processes and responds to requests (e.g., OpenAI API service, Claude API service, internal AI model service).",
            "requirement": "recommended"
        },
        "prompt_tokens": {
            "description": "Number of tokens in the input prompt for this message.",
            "requirement": "optional"
        },
        "completion_tokens": {
            "description": "Number of tokens in the model's response/completion for this message.",
            "requirement": "optional"
        },
        "total_tokens": {
            "description": "Total number of tokens used for this message (prompt + completion).",
            "requirement": "optional"
        }
    },
    "constraints": {
        "at_least_one": [
            "application",
            "service"
        ]
    },
    "profiles": [
        "ai_security"
    ],
    "references": [
        {
            "description": "OWASP AI Security and Privacy Guide - Agent Security",
            "url": "https://owasp.org/www-project-ai-security-and-privacy-guide/"
        },
        {
            "description": "Model Context Protocol (MCP) Specification",
            "url": "https://modelcontextprotocol.io/"
        }
    ]
}